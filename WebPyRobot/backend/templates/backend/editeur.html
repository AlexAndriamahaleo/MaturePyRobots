{% extends "base.html" %}

{% load staticfiles %}

{% block title %}
    MaturePyRobot - Editeur
{% endblock %}

{% block custom_css %}
    <!-- Editeur Python CSS -->
    <link rel="stylesheet" href="{% static 'codemirror/lib/codemirror.css' %}"/>
    <link rel="stylesheet" href="{% static 'codemirror/theme/cobalt.css' %}"/>
    <script src="{% static 'codemirror/lib/codemirror.js' %}"></script>


    <script src="{% static 'codemirror/mode/python/python.js' %}"></script>

    <script src="{% static 'codemirror/addon/edit/closebrackets.js' %}"></script>
    <script src="{% static 'codemirror/addon/edit/matchbrackets.js' %}"></script>
    <!-- CodeMirror Autocomplete-->
    <link rel="stylesheet" href="{% static 'codemirror/addon/hint/simple-hint.css' %}"/>
    <link rel="stylesheet" href="{% static 'codemirror/addon/hint/show-hint.css' %}"/>
    <script src="{% static 'codemirror/addon/hint/simple-hint.js' %}"></script>
    <script src="{% static 'codemirror/addon/hint/show-hint.js' %}"></script>
    <script src="{% static 'codemirror/addon/hint/python-hint.js' %}"></script>
    <style>
        .btn:hover {
            background-color: #388e3c;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="col s12 m9 l10 pad">
        <div class="row z-depth-1 section padding-section">
            <div class="pad row col s12 m12 l12 ">
                <div class="pad col s12 m3 l3 ">
                    <ul class="collection with-header">
                        <li class="collection-header"><h4>Vos Scripts</h4></li>
                        {% for script in scripts %}
                            <li class="collection-item {% if script.pk == selected.pk %} active {% endif %}">
                                <div>
                                    {{ script.name|truncatechars:16 }}
                                    <a href="{% url 'backend:editor' %}?script={{ script.pk }}" class="script-1 secondary-content"><i
                                            class="material-icons">send</i></a>
                                </div>
                            </li>
                        {% endfor %}
                        {% if scripts_count < 5 %}
                            <li class="collection-item {{ addnew }}">
                                <a href="{% url 'backend:editor' %}?addnew=yes">Add New</a>
                            </li>
                        {% endif %}
                    </ul>
                </div>

                <form id="code" action="{% url 'backend:editor' %}" method="post">
                    {% csrf_token %}
                    <div class="pad col s12 m9 l9 ">
                        <input type="text" name="ai_name" value="{{ selected.name }}"  placeholder="Nom de IA"/>
                        <nav>
                            <div class="nav-wrapper yellow lighten-2">
                                <a href="#" data-activates="mobile-demo" class="button-collapse"><i
                                        class="material-icons">menu</i></a>
                                <ul class="left hide-on-med-and-down">
                                    <li class="save">
                                        <input type="submit" class="transparent_button indigo-text darken-4" name="action" value="Sauvgarder">
                                    </li>
                                    <li class="save">
                                        <input type="submit" class="transparent_button indigo-text darken-4" name="action" value="Activer">
                                    </li>
                                    <li><a class="indigo-text darken-4" href="{% url 'backend:fight' %}">Tester</a></li>
                                </ul>
                                <ul class="side-nav" id="mobile-demo">
                                    <li class="save"><a class="waves-effect" href="#"><i
                                            class="material-icons left">save</i>Sauvgarder</a></li>
                                    <li><a class="waves-effect" href="#"><i class="material-icons left">cached</i>Tester</a>
                                    </li>
                                </ul>
                            </div>
                        </nav>

                        <textarea name="ia" id="ia" cols="40" rows="10">{{ selected.text }}</textarea>

                        {% if addnew %}
                            <input type="hidden" name="addnew_flag" value="yes" />
                        {% else %}
                            <input type="hidden" name="selected_pk" value="{{ selected.pk }}" />
                        {% endif %}

                        <p><strong style="font-weight: bold">Active AI:</strong> {{ active_script.name }}</p>
                        <p><strong>Note :</strong> Appuyez ' <i>Ctrl + Space</i> ' pour utliser l'autocomplétion
                                à tout moment.</p>
                        <p><strong>Attention :</strong> Remplacez ce qu'il y a entre trois quotes par une
                                valeur/variable qui correspond.</p>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}

{% block custom_js %}
    <script src="{% static 'js/editor.js' %}"></script>
{% endblock %}